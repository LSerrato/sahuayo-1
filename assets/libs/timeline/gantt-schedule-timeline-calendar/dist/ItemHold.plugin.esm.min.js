export default function(e={}){let t;const n={time:1e3,movementThreshold:2,action(e,t){}};e=Object.assign(Object.assign({},n),e);const o={},i={x:0,y:0};function d(e){void 0!==o[e]&&delete o[e]}function s(n,s){function m(d){!function(n,d,s){if(void 0===o[n.id]){const m=t.normalizePointerEvent(s);o[n.id]={x:m.x,y:m.y},s.stopPropagation(),s.preventDefault(),setTimeout(()=>{if(void 0!==o[n.id]){let t=!0;const s=Math.abs(o[n.id].x-i.x),m=Math.abs(o[n.id].y-i.y);s>e.movementThreshold&&(t=!1),m>e.movementThreshold&&(t=!1),delete o[n.id],t&&e.action(d,n)}},e.time)}}(s.item,n,d)}function u(){d(s.item.id)}function r(e){const n=t.normalizePointerEvent(e);i.x=n.x,i.y=n.y}return n.addEventListener("mousedown",m),n.addEventListener("touchstart",m),document.addEventListener("mouseup",u),document.addEventListener("touchend",u),document.addEventListener("mousemove",r),document.addEventListener("touchmove",r),{update(e,t){s=t},destroy(e,t){document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",r),e.removeEventListener("mousedown",m),document.removeEventListener("touchend",d),document.removeEventListener("touchmove",r),e.removeEventListener("touchstart",m)}}}return function(e){t=e.api,e.state.update("config.actions.chart-timeline-items-row-item",e=>(e.push(s),e))}}
